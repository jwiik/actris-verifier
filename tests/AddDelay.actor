@sdf
actor Add int in1, int in2 ==> int out :
  action in1:[i], in2:[j] ==> out:[i+j] end
end

@sdf
actor Delay(int k) int in ==> int out :
  initialize ==> out:[k] end
  action in:[i] ==> out:[i] end
end

network Net int in ==> int out :
  action in:[x] ==> out:[c[last]+x] end
  
  invariant tokens(b,1)
  invariant b[next] == c[last]
  
  chinvariant (forall int i :: 0 <= i && i < tot(c) ==> c[i] == a[i]+b[i])
  chinvariant (forall int i :: 0 <= i && i < tot(d) ==> d[i] == a[i]+b[i])
  chinvariant (forall int i :: 1 <= i && i < tot(b) ==> b[i] == d[i-1])
  chinvariant b[0] == c[-1]
  
  entities
    add = Add();
    del = Delay(0);
  end
  
  structure
    a: in --> add.in1;
    b: del.out --> add.in2;
    c: add.out --> out;
    d: add.out --> del.in;
  end

end