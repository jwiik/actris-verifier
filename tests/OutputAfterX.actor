actor Sum5 int x ==> int y :
  
  int sum;
  int count;
  
  invariant 0 <= count && count <= 5
  
  a0: action x:[i] ==>
    guard count = 0
  do
    sum := i;
    count := 1;
  end

  a1: action x:[i] ==> 
    guard 1 <= count && count < 5
  do
    sum := sum+i;
    count := count+1;
  end
  
  a2: action ==> y:[sum]
    guard count = 5
  do
    count := 0
  end
    
  schedule fsm s0:
    s0 (a0) --> s1;
    s1 (a1) --> s1;
    s1 (a2) --> s0;
  end
end


network Net int in ==> int out :
  
  action in:[x1,x2,x3,x4,x5] ==> out:[y] end
  
  chinvariant tot(b) <= 5
    
  entities
    s = Sum5();
  end
  
  structure
    a: in --> s.x;
    b: s.y --> out;
  end

end
