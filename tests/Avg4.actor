@static
actor AddSeq int in ==> int out :
  action in:[i,j,k,l] ==> out:[i+j+k+l] end
end

@static
actor Div(int c) int in ==> int out :
  action in:[i] ==> out:[i/c] end
end

network Avg4 int in ==> int out :
  
  action in:4 ==> out:1
    requires (forall int i :: current(in,i)  ==> 0 <= in[i])
    ensures  out[@] = (in[@]+in[@+1]+in[@+2]+in[@+3])/4
    ensures  0 <= out[@]
  end
  
  entities
    add = AddSeq();
    div = Div(4);
  end
  
  structure
    in --> add.in;
    add.out --> div.in;
    div.out --> out;
  end
  
end