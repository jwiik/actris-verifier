actor AddSub bool ctrl, int in1, int in2 ==> int out, bool ctrlout :
  action ctrl:[c], in1:[i], in2:[j] ==> out:[i+j,i*j], ctrlout:[c]
    guard c
  end
  action ctrl:[c], in1:[i], in2:[j] ==> out:[i-j,i/j], ctrlout:[c]
    guard !c
  end
end

network Net bool ctrl, int in1, int in2 ==> int out, bool ctrlout :
    
  action ctrl:1, in1:1, in2:1 ==> out:2, ctrlout:1
    ensures ctrl[@] ==> out[@] = in1[@]+in2[@]
    ensures !ctrl[@] ==> out[@] = in1[@]-in2[@]
    ensures ctrl[@] ==> out[@+1] = in1[@]*in2[@]
    ensures !ctrl[@] ==> out[@+1] = in1[@]/in2[@]
    ensures ctrlout[@] = ctrl[@]
  end
  
  entities
    as = AddSub();
  end
  
  structure
    a: in1 --> as.in1;
    b: in2 --> as.in2;
    c: ctrl --> as.ctrl;
    d: as.out --> out;
    e: as.ctrlout --> ctrlout;
  end

end