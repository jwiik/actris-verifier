network Top int in ==> int out :
  action in:[i] ==> out:[i] end
  
  chinvariant tot(y) == rd(x)
  chinvariant (forall int i :: 0 <= i && i < tot(y) ==> x[i] == y[i])
  
  entities
    n = Nested();
  end
  structure
    x: in --> n.x;
    y: n.y --> out;
  end
end

network Nested int x ==> int y :
  action x:[i] ==> y:[i] end
  
  chinvariant (forall int i :: 0 <= i && i < tot(y) ==> x[i] == y[i])
  
  entities
    a = Repeater();
  end
  structure
    x: x --> a.in;
    y: a.out --> y;
  end
end


actor Repeater int in ==> int out :
  action in:[i] ==> out:[i] end
end
